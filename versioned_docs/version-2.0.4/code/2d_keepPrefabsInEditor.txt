private static GameObject InstantiateRoomTemplate(GameObject roomTemplatePrefab)
{
    // Set to true if you want to keep prefabs when generating levels in the editor
    const bool keepPrefabsInEditor = false;

    // Set to true if you want to unpack the root game object of the prefab
    // (keepPrefabsInEditor must be true for this constant to change anything)
    const bool unpackRootObject = false;

    // ReSharper disable once ConditionIsAlwaysTrueOrFalse
    if (!Application.isPlaying && keepPrefabsInEditor)
    {
        #if UNITY_EDITOR
        var roomTemplateInstance = (GameObject) PrefabUtility.InstantiatePrefab(roomTemplatePrefab);

        if (unpackRootObject)
        {
            #pragma warning disable CS0162 // Unreachable code detected
            PrefabUtility.UnpackPrefabInstance(
                roomTemplateInstance,
                PrefabUnpackMode.OutermostRoot,
                InteractionMode.AutomatedAction
            );
            #pragma warning restore CS0162 // Unreachable code detected
        }

        return roomTemplateInstance;
        #endif
    }

    return Object.Instantiate(roomTemplatePrefab);
}