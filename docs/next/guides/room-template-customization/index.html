<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-31904365-17","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Edgar - Unity" href="/Edgar-Unity/opensearch.xml"><title data-react-helmet="true">Room template customization | Edgar - Unity</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ondrejnepozitek.github.io/Edgar-Unity/docs/next/guides/room-template-customization/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Room template customization | Edgar - Unity"><meta data-react-helmet="true" name="description" content="In this guide, we will cover:"><meta data-react-helmet="true" property="og:description" content="In this guide, we will cover:"><link data-react-helmet="true" rel="icon" href="/Edgar-Unity/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/next/guides/room-template-customization/"><link data-react-helmet="true" rel="alternate" href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/next/guides/room-template-customization/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/next/guides/room-template-customization/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/Edgar-Unity/assets/css/styles.88f5211b.css">
<link rel="preload" href="/Edgar-Unity/assets/js/runtime~main.6f572410.js" as="script">
<link rel="preload" href="/Edgar-Unity/assets/js/main.1bebf59e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">Check out the PRO version of the generator on the <a href="https://url.ondrejnepozitek.com/edgar-docs" target="_blank">Unity Asset Store</a>!</div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Edgar-Unity/"><b class="navbar__title">Edgar - Unity</b></a><a class="navbar__item navbar__link" href="/Edgar-Unity/docs/introduction/">v2.0.10</a><a href="https://url.ondrejnepozitek.com/edgar-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Buy Edgar PRO<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Edgar-Unity/docs/introduction/">Docs</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link">Archive</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Edgar-Unity/docs/introduction/">2.0.10</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/2.0.6/introduction/">2.0.6</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/2.0.5/introduction/">2.0.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/Edgar-Unity/docs/next/introduction/">Master/Unreleased</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/Edgar-Unity/docs/3d/introduction/">Docs (3D version beta)</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Edgar-Unity/docs/3d/introduction/">2.0.10</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/3d/2.0.6/introduction/">2.0.6</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/3d/2.0.5/introduction/">2.0.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/Edgar-Unity/docs/next/3d/introduction/">Master/Unreleased</a></li></ul></div><a href="https://github.com/OndrejNepozitek/Edgar-Unity/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><span class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></span><span class="DocSearch-Button-Key">K</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO menuWithAnnouncementBar_x19h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/introduction/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/motivation/">Motivation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/installation/">Installation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Basics</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/basics/quickstart/">Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/basics/room-templates/">Room templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/basics/level-graphs/">Level graphs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/basics/generator-setup/">Generator setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/basics/generated-level-info/">Level structure and rooms data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/basics/performance-tips/">Performance tips</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Generators</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/generators/dungeon-generator/">Dungeon generator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/generators/post-process/">Post-processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/generators/platformer-generator/">(PRO) Platformer generator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/generators/custom-input/">(PRO) Custom input</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Examples</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/examples/example-1/">Example 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/examples/example-2/">Example 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/examples/platformer-1/">(PRO) Platformer 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/examples/isometric-1/">(PRO) Isometric 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/examples/enter-the-gungeon/">(PRO) Enter the Gungeon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/examples/dead-cells/">(PRO) Dead Cells</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active menuLinkText_QVir" aria-current="page">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Edgar-Unity/docs/next/guides/room-template-customization/">Room template customization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/guides/current-room-detection/">Current room detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/guides/fog-of-war/">(PRO) Fog of war</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/guides/fog-of-war-mesh/">(PRO) Fog of war (URP 2D Lights)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/guides/minimap/">(PRO) Minimap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/guides/door-sockets/">(PRO) Door sockets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/guides/directed-level-graphs/">(PRO) Directed level graphs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/guides/custom-editor-controls/">(PRO) Custom editor controls</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Other</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/other/faq/">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item hidden-category"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Recipes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/next/recipes/prefabs-in-editor/">Keep prefabs in editor</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Edgar - Unity<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/Edgar-Unity/docs/guides/room-template-customization/">latest version</a></b> (<!-- -->2.0.10<!-- -->).</div></div><div class="docItemContainer_vinB"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->Next</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Room template customization</h1></header><p>In this guide, we will cover:</p><ol><li>How to <strong>override the default structure of tilemap layers</strong></li><li>How to <strong>customize room templates</strong> e.g. by automatically adding additional game objects/components</li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="tilemap-layers-structure">Tilemap layers structure<a class="hash-link" href="#tilemap-layers-structure" title="Direct link to heading">â€‹</a></h2><p>Each room template comes with a set of tilemap layers that are all children of the <em>Tilemaps</em> game object in the room template. For dungeon room templates, we usually want a tilemap layer for wall tiles, floor tiles, etc. I tried to provide a reasonable default setup, but it is expected that users may want to use a different structure.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="why-so-difficult">Why so difficult?<a class="hash-link" href="#why-so-difficult" title="Direct link to heading">â€‹</a></h3><p><em>Wait, cannot I just take a room template, do some changes (add a tilemap layer, collider, etc.), save the changes and be done?</em></p><p>Unfortunately, no, it is not that simple. After a level is generated, all the room templates are merged to a single set of shared tilemaps. So, if you want to change something, you also have to instruct the generator that the changes should also be applied to the shared tilemaps.</p><p><em>But cannot this be done automatically?</em></p><p>Yes, it can. But it would often lead to unexpected results. Imagine that you do two conflicting changes to your room templates: you keep a collider in one room template and remove the collider in another one. Now what should the generator do? If it chooses to do the wrong thing, you will be confused due to not knowing where the problem is.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="different-modes">Different modes<a class="hash-link" href="#different-modes" title="Direct link to heading">â€‹</a></h3><p>There is a <em>Tilemap Layers Structure</em> field in the <em>Post-processing config</em> section of the <em>Dungeon Generator</em> component that controls the structure of tilemaps. This field is backed by an enum which currently has 3 possible values:</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="default"><code>Default</code><a class="hash-link" href="#default" title="Direct link to heading">â€‹</a></h4><p>The default tilemaps structure is what you get when you create a room template via the <em>Create</em> menu dialogue. This structure of tilemaps is <em>fixed</em>, meaning that if you customize the structure of some of your room templates, the resulting structure will always be the same. <strong>Therefore, it is not recommended making any changes to the structure of tilemaps when using this mode,</strong> as it can lead to unexpected results.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="fromexample"><code>FromExample</code><a class="hash-link" href="#fromexample" title="Direct link to heading">â€‹</a></h4><p>This mode makes it possible to infer the desired structure of tilemaps from an example room template given to the generator. When enabled, there is a new field - <em>Tilemaps Layers Example</em>. To configure this mode, you have to take one of your room templates and assign it to that field. After a level is generated, the generator will take the example room template, look for the <code>Tilemaps</code> game object inside the room template and then instantiate this game object. It means that anything that is inside the <code>Tilemaps</code> game object will be included in the generated level, including the structure of tilemaps in the example. The last thing that the generator does is that it removes all the tiles in the example so that you can use a real room template as an example.</p><blockquote><p><strong>Note:</strong> In the past, if you wanted to have a custom structure of tilemaps, you had to write a piece of code to do that. Even if you wanted to change something small, you still had to do that. The <code>FromExample</code> mode is here to change that.</p></blockquote><p>Typical use case:</p><ul><li>Start with a room template with the default structure of tilemaps</li><li>Decide that you want to change something in the tilemaps - modify layers/sorting layers, add/remove colliders, etc.</li><li>Change the room template to reflect these changes</li><li>Use the <code>FromExample</code> mode and assign this room template to the example field</li><li>When creating a new room template, duplicate one of the room templates with the correct structure (instead of using the <em>Create</em> menu dialogue to create the empty default room template)</li></ul><blockquote><p><strong>Note:</strong> It is still very important to have the same structure of tilemaps across all room templates. So make sure that all the room templates have the same structure as the example room template.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_mojV" id="custom"><code>Custom</code><a class="hash-link" href="#custom" title="Direct link to heading">â€‹</a></h4><p>The last way of customizing the structure of tilemap layers requires writing a piece of code. You have to create a class that inherits from the <code>TilemapLayersHandlerBase</code> class. Below is a commented example of how to do that:</p><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">// TilemapLayersHandlerBase inherit from ScriptableObject so we need to create an asset</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">// menu item that we will use to create the scriptable object instance.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">// The menu name can be changed to anything you want.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">// [CreateAssetMenu(menuName = &quot;Dungeon generator/Custom tilemap layers handler&quot;, fileName = &quot;CustomTilemapLayersHandler&quot;)]</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">public class CustomTilemapLayersHandlerExample : TilemapLayersHandlerBaseGrid2D</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public override void InitializeTilemaps(GameObject gameObject)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // First make sure that you add the grid component</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var grid = gameObject.AddComponent&lt;Grid&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // If we want a different cell size, we can configure that here</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // grid.cellSize = new Vector3(1, 2, 1);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // And now we create individual tilemap layers</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var floorTilemapObject = CreateTilemapGameObject(&quot;Floor&quot;, gameObject, 0);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var wallsTilemapObject = CreateTilemapGameObject(&quot;Walls&quot;, gameObject, 1);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        AddCompositeCollider(wallsTilemapObject);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        CreateTilemapGameObject(&quot;Additional layer 1&quot;, gameObject, 2);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        CreateTilemapGameObject(&quot;Additional layer 2&quot;, gameObject, 3);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// Helper to create a tilemap layer</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    protected GameObject CreateTilemapGameObject(string name, GameObject parentObject, int sortingOrder)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Create a new game object that will hold our tilemap layer</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var tilemapObject = new GameObject(name);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Make sure to correctly set the parent</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        tilemapObject.transform.SetParent(parentObject.transform);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var tilemap = tilemapObject.AddComponent&lt;Tilemap&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var tilemapRenderer = tilemapObject.AddComponent&lt;TilemapRenderer&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        tilemapRenderer.sortingOrder = sortingOrder;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        return tilemapObject;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// Helper to add a collider to a given tilemap game object.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    protected void AddCompositeCollider(GameObject tilemapGameObject, bool isTrigger = false)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var tilemapCollider2D = tilemapGameObject.AddComponent&lt;TilemapCollider2D&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        #if UNITY_2023_2_OR_NEWER</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        tilemapCollider2D.compositeOperation = Collider2D.CompositeOperation.Merge;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        #else</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        tilemapCollider2D.usedByComposite = true;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        #endif</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var compositeCollider2d = tilemapGameObject.AddComponent&lt;CompositeCollider2D&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        compositeCollider2d.geometryType = CompositeCollider2D.GeometryType.Polygons;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        compositeCollider2d.isTrigger = isTrigger;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        tilemapGameObject.GetComponent&lt;Rigidbody2D&gt;().bodyType = RigidbodyType2D.Static;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>When we have our custom tilemap layers handler prepared, there are 2 additional steps:</p><ol><li><strong>Register the handler in the generator</strong> so that each generated level has this new structure</li><li>(<em>Optional but highly recommended</em>) <strong>Create a custom room template initializer</strong> that will help you with creating room templates with the new structure</li></ol><h4 class="anchor anchorWithStickyNavbar_mojV" id="register-the-handler-in-the-generator">Register the handler in the generator<a class="hash-link" href="#register-the-handler-in-the-generator" title="Direct link to heading">â€‹</a></h4><p>We have to configure the generator to use our custom tilemap layers handler.</p><p>First, we have to create an instance of a ScriptableObject that will hold our custom handler. This is the reason why we added the <em>CreateAssetMenu</em> attribute to our handler. In the project view, we right-click in a folder and choose <i class="path">Create â†’ Edgar â†’ Custom tilemap layers handler</i> (the path may be changed in the <em>CreateAssetMenu</em> attribute). That should create a file in the current folder.</p><p>And second, we have to drag and drop this file to the <em>Tilemap Layers Handler</em> field of our generator component. Make sure to choose the <em>Custom</em> tilemap layers structure mode to see the field. If we want to switch the tilemap layers handler in the future, we can either replace it with a different handler or remove it to use the default handler.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="create-a-custom-room-template-initializer">Create a custom room template initializer<a class="hash-link" href="#create-a-custom-room-template-initializer" title="Direct link to heading">â€‹</a></h4><p>Now we will add a <em>Create menu</em> shortcut to create a room template with a custom tilemap layers handler. This is better explained in the next section, below is the minimal working example. It will add a <i class="path">Create â†’ Edgar â†’ Custom room template</i> menu item that will create a room template prefab with our custom tilemap layers.</p><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">public class CustomRoomTemplateInitializerExample : RoomTemplateInitializerBaseGrid2D</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    protected override void InitializeTilemaps(GameObject tilemapsRoot)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Create an instance of our custom tilemap layers handler</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var tilemapLayersHandler = ScriptableObject.CreateInstance&lt;CustomTilemapLayersHandlerExample&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Initialize tilemaps</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        tilemapLayersHandler.InitializeTilemaps(tilemapsRoot);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    // Change the attribute below to anything you want. (And uncomment it)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    // [MenuItem(&quot;Assets/Create/Dungeon generator/Custom room template&quot;)]</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public static void CreateRoomTemplatePrefab()</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Make sure to use the correct generic parameter - it should be the type of this class</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        RoomTemplateInitializerUtilsGrid2D.CreateRoomTemplatePrefab&lt;CustomRoomTemplateInitializerExample&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="room-template-initializers">Room template initializers<a class="hash-link" href="#room-template-initializers" title="Direct link to heading">â€‹</a></h2><p>The process of creating room templates would be very time-consuming and error-prone if done manually, i.e. by creating all the tilemap layers by hand. If you use the default tilemaps structure, you can use the <em>Create</em> menu dialogue. But if you somehow customize your room templates, e.g. by adding lights represented by multiple game objects, the default room template initializer is no longer useful. There are basically two ways of making it easier to create room templates:</p><ol><li>Choose one of the already created room templates and create a copy of the prefab</li><li>Write a piece of code that will handle the initialization of new room templates</li></ol><p>The first option is a pretty solid choice most of the time and requires no extra preparation steps. In this guide, we will see how to handle the second option. We will implement a so-called <em>room template initializer</em>. This technique is mostly only useful if you use the <em>Custom</em> tilemaps structure mode, because you may want to use a custom tilemap layers handler.</p><p>There are two main ways of utilizing custom room template initializers:</p><ol><li>To override the default structure of tilemap layers</li><li>To do some post-processing, e.g. add additional game objects or components to a room template</li></ol><p>The steps to create a custom room template initializer are the following:</p><ol><li>Create a class that inherits from <code>RoomTemplateInitializerBase</code></li><li>(Optional) Override the <code>InitializeTilemaps()</code> method and use a custom tilemap layers handler</li><li>(Optional) Run additional logic after a room template is created</li><li>Add custom menu item so that we can use the initializer via a <em>Create asset menu</em></li></ol><p>An example can be seen below:</p><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">public class CustomRoomTemplateInitializerExample2 : RoomTemplateInitializerBaseGrid2D</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public override void Initialize()</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Call the default initialization</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        base.Initialize();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Place your custom logic after initialization here</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // This script is attached to the room template game object that is being created (and this component is later removed)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // So you can access the gameObject field and add e.g. additional game object</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // For example, we can add a game object that will hold lights</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var lightsGameObject = new GameObject(&quot;Lights&quot;);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        lightsGameObject.transform.SetParent(gameObject.transform);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    protected override void InitializeTilemaps(GameObject tilemapsRoot)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Create an instance of our custom tilemap layers handler</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var tilemapLayersHandler = ScriptableObject.CreateInstance&lt;CustomTilemapLayersHandlerExample&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Initialize tilemaps</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        tilemapLayersHandler.InitializeTilemaps(tilemapsRoot);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    // Change the attribute below to anything you want. (And uncomment it)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    // [MenuItem(&quot;Assets/Create/Dungeon generator/Custom room template&quot;)]</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public static void CreateRoomTemplatePrefab()</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Make sure to use the correct generic parameter - it should be the type of this class</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        RoomTemplateInitializerUtilsGrid2D.CreateRoomTemplatePrefab&lt;CustomRoomTemplateInitializerExample2&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/OndrejNepozitek/Edgar-Unity/tree/docusaurus/docs/guides/room-template-customization.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Edgar-Unity/docs/next/examples/dead-cells/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">(PRO) Dead Cells</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Edgar-Unity/docs/next/guides/current-room-detection/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Current room detection</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tilemap-layers-structure" class="table-of-contents__link toc-highlight">Tilemap layers structure</a><ul><li><a href="#why-so-difficult" class="table-of-contents__link toc-highlight">Why so difficult?</a></li><li><a href="#different-modes" class="table-of-contents__link toc-highlight">Different modes</a></li></ul></li><li><a href="#room-template-initializers" class="table-of-contents__link toc-highlight">Room template initializers</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Edgar-Unity/docs/introduction/">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/OndrejNepozitek" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/syktZ6VWq9" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://ondra.nepozitek.cz/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/OndrejNepozitek/Edgar-Unity" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 OndÅ™ej NepoÅ¾itek</div></div></div></footer></div>
<script src="/Edgar-Unity/assets/js/runtime~main.6f572410.js"></script>
<script src="/Edgar-Unity/assets/js/main.1bebf59e.js"></script>
</body>
</html>