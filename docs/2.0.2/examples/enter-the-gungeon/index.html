<!doctype html>
<html class="docs-version-2.0.2" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-31904365-17","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Edgar - Unity" href="/Edgar-Unity/opensearch.xml"><title data-react-helmet="true">(PRO) Enter the Gungeon | Edgar - Unity</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ondrejnepozitek.github.io/Edgar-Unity/docs/2.0.2/examples/enter-the-gungeon/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="2.0.2"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-2.0.2"><meta data-react-helmet="true" property="og:title" content="(PRO) Enter the Gungeon | Edgar - Unity"><meta data-react-helmet="true" name="description" content="In this tutorial, we will look into how to generate levels similar to what we can see in Enter the Gungeon. We will use this tileset by @pixelpoem - be sure to check out their work if you like the tileset."><meta data-react-helmet="true" property="og:description" content="In this tutorial, we will look into how to generate levels similar to what we can see in Enter the Gungeon. We will use this tileset by @pixelpoem - be sure to check out their work if you like the tileset."><link data-react-helmet="true" rel="icon" href="/Edgar-Unity/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/2.0.2/examples/enter-the-gungeon/"><link data-react-helmet="true" rel="alternate" href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/2.0.2/examples/enter-the-gungeon/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/2.0.2/examples/enter-the-gungeon/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/Edgar-Unity/assets/css/styles.cf388800.css">
<link rel="preload" href="/Edgar-Unity/assets/js/runtime~main.82c1af0d.js" as="script">
<link rel="preload" href="/Edgar-Unity/assets/js/main.be3a200f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">Check out the PRO version of the generator on the <a href="https://url.ondrejnepozitek.com/edgar-docs" target="_blank">Unity Asset Store</a>!</div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Edgar-Unity/"><b class="navbar__title">Edgar - Unity</b></a><a class="navbar__item navbar__link" href="/Edgar-Unity/versions/">v2.0.6</a><a href="https://url.ondrejnepozitek.com/edgar-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Buy Edgar PRO<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/Edgar-Unity/docs/introduction/">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Edgar-Unity/docs/introduction/">2.0.6</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/2.0.5/introduction/">2.0.5</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/2.0.4/introduction/">2.0.4</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/next/introduction/">Master/Unreleased</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/Edgar-Unity/docs/3d/introduction/">Docs (3D version beta)</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Edgar-Unity/docs/3d/introduction/">2.0.6</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/3d/2.0.5/introduction/">2.0.5</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/3d/2.0.4/introduction/">2.0.4</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/next/3d/introduction/">Master/Unreleased</a></li></ul></div><a href="https://github.com/OndrejNepozitek/Edgar-Unity/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><span class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></span><span class="DocSearch-Button-Key">K</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO menuWithAnnouncementBar_x19h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/introduction/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/motivation/">Motivation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/installation/">Installation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Basics</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/basics/quickstart/">Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/basics/room-templates/">Room templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/basics/level-graphs/">Level graphs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/basics/generator-setup/">Generator setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/basics/generated-level-info/">Level structure and rooms data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/basics/performance-tips/">Performance tips</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Generators</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/generators/dungeon-generator/">Dungeon generator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/generators/post-process/">Post-processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/generators/platformer-generator/">(PRO) Platformer generator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/generators/custom-input/">(PRO) Custom input</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active menuLinkText_QVir" aria-current="page">Examples</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/examples/example-1/">Example 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/examples/example-2/">Example 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/examples/platformer-1/">(PRO) Platformer 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/examples/isometric-1/">(PRO) Isometric 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Edgar-Unity/docs/2.0.2/examples/enter-the-gungeon/">(PRO) Enter the Gungeon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/examples/dead-cells/">(PRO) Dead Cells</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/guides/room-template-customization/">Room template customization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/guides/current-room-detection/">Current room detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/guides/fog-of-war/">(PRO) Fog of war</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/guides/minimap/">(PRO) Minimap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/guides/door-sockets/">(PRO) Door sockets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/guides/directed-level-graphs/">(PRO) Directed level graphs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/guides/custom-editor-controls/">(PRO) Custom editor controls</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Other</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/other/faq/">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item hidden-category"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Recipes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.2/recipes/prefabs-in-editor/">Keep prefabs in editor</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Edgar - Unity<!-- --> <b>2.0.2</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/Edgar-Unity/docs/examples/enter-the-gungeon/">latest version</a></b> (<!-- -->2.0.6<!-- -->).</div></div><div class="docItemContainer_vinB"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->2.0.2</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>(PRO) Enter the Gungeon</h1></header><p>In this tutorial, we will look into how to generate levels similar to what we can see in <a href="https://store.steampowered.com/app/311690/Enter_the_Gungeon/" target="_blank" rel="noopener noreferrer">Enter the Gungeon</a>. We will use <a href="https://pixel-poem.itch.io/dungeon-assetpuck" target="_blank" rel="noopener noreferrer">this tileset</a> by <a href="https://twitter.com/pixel_poem" target="_blank" rel="noopener noreferrer">@pixel_poem</a> - be sure to check out their work if you like the tileset.</p><blockquote><p><strong>Disclaimer:</strong> We are in no way affiliated with the authors of the <strong>Enter the Gungeon</strong> game and this plugin is not used in the game. This is only a case study about how to use this plugin to create something similar to what is done in that game.</p></blockquote><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/result1-4b4ef56d8d32f02097426b0f50540dca.png" target="_blank"><img src="/Edgar-Unity/assets/images/result1-4b4ef56d8d32f02097426b0f50540dca.png" alt="image" width="956" height="497" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Example result</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/result2-2dd3a09b27b88eec658221111f3af339.png" target="_blank"><img src="/Edgar-Unity/assets/images/result2-2dd3a09b27b88eec658221111f3af339.png" alt="image" width="953" height="493" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Example result</div></div></div><video width="100%" muted="" style="margin-bottom:15px;margin-top:-15px"><source src="/Edgar-Unity/videos/gungeon_example_video.mp4" type="video/mp4">Your browser does not support the video tag.</video><blockquote><p><strong>Note:</strong> All files from this example can be found at <i class="path">Examples/Grid2D/Gungeon</i>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="room-templates">Room templates<a class="hash-link" href="#room-templates" title="Direct link to heading">â€‹</a></h2><blockquote><p><strong>Note:</strong> If you want to add some more room templates, be sure to use the <em>Create</em> menu (<em>Examples/Gungeon/Room template</em>) or duplicate one of the existing room templates.</p></blockquote><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/entrance-97b86e304aa41e8264766597edb84287.png" target="_blank"><img src="/Edgar-Unity/assets/images/entrance-97b86e304aa41e8264766597edb84287.png" alt="image" width="954" height="473" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Entrance</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/hub1-d719fe7ae77063054650ab6b0fd0b9fd.png" target="_blank"><img src="/Edgar-Unity/assets/images/hub1-d719fe7ae77063054650ab6b0fd0b9fd.png" alt="image" width="954" height="473" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Hub</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/normal5-24f2a10ec7614018e3ea4ca3973ef098.png" target="_blank"><img src="/Edgar-Unity/assets/images/normal5-24f2a10ec7614018e3ea4ca3973ef098.png" alt="image" width="954" height="473" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Normal</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/reward-c21d689c72cb5a61fc7da2ba133ce6e8.png" target="_blank"><img src="/Edgar-Unity/assets/images/reward-c21d689c72cb5a61fc7da2ba133ce6e8.png" alt="image" width="954" height="473" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Reward</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/shop-2b75c0f07d5045a01da56c2aaedc0c0a.png" target="_blank"><img src="/Edgar-Unity/assets/images/shop-2b75c0f07d5045a01da56c2aaedc0c0a.png" alt="image" width="954" height="473" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Shop</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/secret-fabf585043caafe5afd6345d03f09dde.png" target="_blank"><img src="/Edgar-Unity/assets/images/secret-fabf585043caafe5afd6345d03f09dde.png" alt="image" width="954" height="473" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Secret</div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="level-graphs">Level graphs<a class="hash-link" href="#level-graphs" title="Direct link to heading">â€‹</a></h2><p>In Enter the Gungeon, they use multiple level graphs for each stage of the game.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/level_graph_2-506a2c0d3261a722b80f3f31a935dd4e.png" target="_blank"><img src="/Edgar-Unity/assets/images/level_graph_2-506a2c0d3261a722b80f3f31a935dd4e.png" alt="image" width="1050" height="560" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Stage 1 level graph</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/level_graph_1-7e268d44903f7df17e65a0f2c996c0f1.png" target="_blank"><img src="/Edgar-Unity/assets/images/level_graph_1-7e268d44903f7df17e65a0f2c996c0f1.png" alt="image" width="1091" height="566" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Stage 2 level graph</div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="custom-rooms-and-connections">Custom rooms and connections<a class="hash-link" href="#custom-rooms-and-connections" title="Direct link to heading">â€‹</a></h3><p>In the level graph above, we used custom room and connection types. We use this feature to add additional data to rooms and connection and also to change how they are displayed in the editor.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="rooms">Rooms<a class="hash-link" href="#rooms" title="Direct link to heading">â€‹</a></h4><p>Each room in Enter the Gungeon has its type - there are rooms with enemies, treasure rooms, shops, etc. We use a custom room implementation to add the <code>GungGungeonRoomType Type</code> field to each room. Moreover, we use different colours to distinguish different types of rooms in the level graph editor.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="connections">Connections<a class="hash-link" href="#connections" title="Direct link to heading">â€‹</a></h4><p>Some corridors in Enter the Gungeon are locked and can be unlocked only from the other side of the door. This is usually used to force the player to go through a loop that ends with a treasure or shop room and the door then serves as a shortcut to get back to the main path. We use a custom connection implementation to add the <code>bool IsLocked</code> field. If the door is locked, we use red colour to draw the line between the two rooms.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">GungeonRoom.cs</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">GungeonConnection.cs</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">public class GungeonRoom : RoomBase</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public GungeonRoomType Type;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public override List&lt;GameObject&gt; GetRoomTemplates()</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // We do not need any room templates here because they are resolved based on the type of the room.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public override string GetDisplayName()</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Use the type of the room as its display name.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        return Type.ToString();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public override RoomEditorStyle GetEditorStyle(bool isFocused)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var style = base.GetEditorStyle(isFocused);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var backgroundColor = style.BackgroundColor;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Use different colors for different types of rooms</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        switch (Type)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            case GungeonRoomType.Entrance:</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                backgroundColor = new Color(38 / 256f, 115 / 256f, 38 / 256f);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            case GungeonRoomType.Boss:</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                backgroundColor = new Color(128 / 256f, 0 / 256f, 0 / 256f);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            case GungeonRoomType.Shop:</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                backgroundColor = new Color(102 / 256f, 0 / 256f, 204 / 256f);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            case GungeonRoomType.Reward:</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                backgroundColor = new Color(102 / 256f, 0 / 256f, 204 / 256f);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        style.BackgroundColor = backgroundColor;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Darken the color when focused</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        if (isFocused)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            style.BackgroundColor = Color.Lerp(style.BackgroundColor, Color.black, 0.7f);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        return style;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">public class GungeonConnection : Connection</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    // Whether the corresponding corridor should be locked</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public bool IsLocked;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public override ConnectionEditorStyle GetEditorStyle(bool isFocused)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var style = base.GetEditorStyle(isFocused);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Use red color when locked</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        if (IsLocked)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            style.LineColor = Color.red;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        return style;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="input-setup-task">Input setup task<a class="hash-link" href="#input-setup-task" title="Direct link to heading">â€‹</a></h3><p>We will use a <a href="/Edgar-Unity/docs/2.0.2/generators/custom-input/">custom input setup task</a> because it gives us more control when working with the input. We will use it to choose a random level graph and add a random secret room. The base of the task is the same as in the <a href="/Edgar-Unity/docs/2.0.2/examples/dead-cells/#input-setup">Dead Cells</a> example.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="pick-random-level-graph">Pick random level graph<a class="hash-link" href="#pick-random-level-graph" title="Direct link to heading">â€‹</a></h3><p>Because we have multiple level graphs for each stage of the game, we want to choose the level graph randomly from the available options. The implementation is straightforward:</p><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">[CreateAssetMenu(menuName = &quot;Edgar/Examples/Gungeon/Input setup&quot;, fileName = &quot;Gungeon Input Setup&quot;)]</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">public class GungeonInputSetupTask : DungeonGeneratorInputBaseGrid2D</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    [Range(1, 2)]</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public int Stage = 1;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public LevelGraph[] Stage1LevelGraphs;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public LevelGraph[] Stage2LevelGraphs;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    protected override LevelDescriptionGrid2D GetLevelDescription()</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Pick random level graph</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var levelGraphs = Stage == 1 ? Stage1LevelGraphs : Stage2LevelGraphs;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var levelGraph = levelGraphs.GetRandom(Random);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // The instance of the game manager will not exist in Editor</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        if (GungeonGameManager.Instance != null)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            GungeonGameManager.Instance.CurrentLevelGraph = levelGraph;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Then we just assign level graphs to the two arrays. The last step is to control the current stage of the game. We can do that in the game manager before we generate a level:</p><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">private IEnumerator GeneratorCoroutine(DungeonGeneratorGrid2D generator)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    // Configure the generator with the current stage number</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    var inputTask = (GungeonInputSetupTask) generator.CustomInputTask;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    inputTask.Stage = Stage;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="random-secret-rooms">Random secret rooms<a class="hash-link" href="#random-secret-rooms" title="Direct link to heading">â€‹</a></h3><p>Even though all the levels are primarily guided by hand-made level graphs, there is a bit of randomness included. When we set up the input for the algorithm, we roll a die to determine if we want to add a secret room to the level. We can add a <code>float SecretRoomChance</code> field to the input setup and configure this value directly in the generator inspector. In Enter the Gungeon, they also choose whether to connect the room to a dead-end room or to any rooms - this is controlled with <code>SecretRoomDeadEndChance</code>.</p><p>To add the secret room to the level, we first get all the rooms from the level description and randomly choose one of them to attach the secret room to. Then we have to do 3 things. First, we create an instance of the secret room - this corresponds to a room node in the level graph. Second, we create an instance of the connection between the two rooms - this corresponds to an edge in the level graph. And third, because we use corridors, we also need to create an instance of the corridor room that is between the two rooms.</p><blockquote><p><strong>Note:</strong> Our secret rooms are not really secret as we do not hide them in any way. I may revisit this in the future to make them really secret.</p></blockquote><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>Show code block</summary><div><div class="collapsibleContent_i85q"><div><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">[CreateAssetMenu(menuName = &quot;Edgar/Examples/Gungeon/Input setup&quot;, fileName = &quot;Gungeon Input Setup&quot;)]</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">public class GungeonInputSetupTask : DungeonGeneratorInputBaseGrid2D</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public LevelGraph LevelGraph;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public GungeonRoomTemplatesConfig RoomTemplates;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    // The probability that a secret room is added to the level</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    [Range(0f, 1f)]</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public float SecretRoomChance = 0.9f;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    // The probability that a secret room is attached to a dead-end room</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    [Range(0f, 1f)]</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public float SecretRoomDeadEndChance = 0.5f;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    protected override LevelDescriptionGrid2D GetLevelDescription()</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Add secret rooms</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        AddSecretRoom(levelDescription);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    private void AddSecretRoom(LevelDescriptionGrid2D levelDescription)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Return early if no secret room should be added to the level</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        if (Random.NextDouble() &gt; SecretRoomChance) return;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Get the graphs of rooms</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var graph = levelDescription.GetGraph();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Decide whether to attach the secret room to a dead end room or not</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var attachToDeadEnd = Random.NextDouble() &lt; SecretRoomDeadEndChance;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Find all the possible rooms to attach to and choose a random one</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var possibleRoomsToAttachTo = graph.Vertices.Cast&lt;GungeonRoom&gt;().Where(x =&gt;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            (!attachToDeadEnd || graph.GetNeighbors(x).Count() == 1) &amp;&amp; x.Type != GungeonRoomType.Entrance</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        ).ToList();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var roomToAttachTo = possibleRoomsToAttachTo[Random.Next(possibleRoomsToAttachTo.Count)];</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Create secret room</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var secretRoom = ScriptableObject.CreateInstance&lt;GungeonRoom&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        secretRoom.Type = GungeonRoomType.Secret;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        levelDescription.AddRoom(secretRoom, RoomTemplates.GetRoomTemplates(secretRoom).ToList());</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Prepare the connection between secretRoom and roomToAttachTo</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var connection = ScriptableObject.CreateInstance&lt;GungeonConnection&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        connection.From = roomToAttachTo;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        connection.To = secretRoom;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Connect the two rooms with a corridor</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var corridorRoom = ScriptableObject.CreateInstance&lt;GungeonRoom&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        corridorRoom.Type = GungeonRoomType.Corridor;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        levelDescription.AddCorridorConnection(connection, corridorRoom, RoomTemplates.CorridorRoomTemplates.ToList());</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div></div></details><h2 class="anchor anchorWithStickyNavbar_mojV" id="room-manager">Room manager<a class="hash-link" href="#room-manager" title="Direct link to heading">â€‹</a></h2><p>In Enter the Gungeon, when a player visits a (combat-oriented) room for the first time, two things happen. First, all the doors to neighbouring rooms get closed and locked. And second, enemies are spawned. Only after all the enemies are defeated, the doors unlock.</p><video width="100%" muted=""><source src="/Edgar-Unity/videos/gungeon_enter_room.mp4" type="video/mp4">Your browser does not support the video tag.</video><br><blockquote><p><strong>Note:</strong> The enemies in this example are very dumb - they just stand there and cannot be killed as there is no combat system implemented. Therefore, the doors open after some time even though enemies are still alive.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_mojV" id="current-room-detection">Current room detection<a class="hash-link" href="#current-room-detection" title="Direct link to heading">â€‹</a></h3><p>The base of this setup is detecting when a player enters a room. We will use the same setup as we described in the <a href="/Edgar-Unity/docs/2.0.2/guides/current-room-detection/">Current room detection</a> tutorial. That means that we have a floor collider that is set to trigger, and it informs <code>RoomManager</code> when the player enters a room.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="enemies">Enemies<a class="hash-link" href="#enemies" title="Direct link to heading">â€‹</a></h3><p>We will use a very simple approach to a randomized spawn of enemies. We will use the floor collider that we set up in the previous step to get a random position inside the room.</p><p>The algorithm works as follows:</p><ol><li>Get a random position inside floor collider bounds</li><li>Check if the position is actually inside the collider (there may be holes)</li><li>Check that there are no other colliders near the position</li><li>Pick a random enemy and instantiate it at the position</li></ol><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>Show code block</summary><div><div class="collapsibleContent_i85q"><div><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">public class GungeonRoomManager : MonoBehaviour</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// Enemies that can spawn inside the room.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public GameObject[] Enemies;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// Whether enemies were spawned.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public bool EnemiesSpawned;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// Collider of the floor tilemap layer.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public Collider2D FloorCollider;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    private void SpawnEnemies()</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        EnemiesSpawned = true;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var enemies = new List&lt;GameObject&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var totalEnemiesCount = GungeonGameManager.Instance.Random.Next(4, 8);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        while (enemies.Count &lt; totalEnemiesCount)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            // Find random position inside floor collider bounds</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            var position = RandomPointInBounds(FloorCollider.bounds, 1f);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            // Check if the point is actually inside the collider as there may be holes in the floor, etc.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            if (!IsPointWithinCollider(FloorCollider, position))</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                continue;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            // We want to make sure that there is no other collider in the radius of 1</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            if (Physics2D.OverlapCircleAll(position, 0.5f).Any(x =&gt; !x.isTrigger))</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                continue;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            // Pick random enemy prefab</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            var enemyPrefab = Enemies[Random.Range(0, Enemies.Length)];</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            // Create an instance of the enemy and set position and parent</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            var enemy = Instantiate(enemyPrefab);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            enemy.transform.position = position;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            enemy.transform.parent = roomInstance.RoomTemplateInstance.transform;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            enemies.Add(enemy);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    private static bool IsPointWithinCollider(Collider2D collider, Vector2 point)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        return collider.OverlapPoint(point);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    private static Vector3 RandomPointInBounds(Bounds bounds, float margin = 0)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        return new Vector3(</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            Random.Range(bounds.min.x + margin, bounds.max.x - margin),</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            Random.Range(bounds.min.y + margin, bounds.max.y - margin),</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            Random.Range(bounds.min.z + margin, bounds.max.z - margin)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div></div></details><br><blockquote><p><strong>Note:</strong> As the process of choosing enemy spawn points is random, we hope that the success rate is quite high, and we do not have to spend too much time on it. However, if we wanted to spawn too many enemies or there were too many holes in the collider, we could have problems with performance. In that case, it would be better to use a different approach.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_mojV" id="doors">Doors<a class="hash-link" href="#doors" title="Direct link to heading">â€‹</a></h3><p>Our goal is to close neighbouring corridors with doors when the player enters the room and then open the doors when all the enemies are dead. The only slightly complex part is how to obtain the game objects that represent the doors. To make our lives easier, we added the doors directly to each corridor room template. That means that after the level is generated we just have to retrieve the doors from corridor room templates.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/ver5-6539bcd93610fa1cfeade3dc01a93988.png" target="_blank"><img src="/Edgar-Unity/assets/images/ver5-6539bcd93610fa1cfeade3dc01a93988.png" alt="image" width="954" height="473" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Vertical corridor</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/hor5-c239528dd97711564f3690e4478bb4e9.png" target="_blank"><img src="/Edgar-Unity/assets/images/hor5-c239528dd97711564f3690e4478bb4e9.png" alt="image" width="954" height="473" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Horizontal corridor</div></div></div><p>We can do it like this:</p><ol><li>Prepare a custom post-processing task</li><li>Go through all non-corridor rooms</li><li>Find all the corridors that are connected to the room</li><li>Get the door game object from each neighbouring corridor</li><li>Store all the doors in the room manager</li></ol><p>When we have the game objects, we can simply activate them when the player enters the room and then deactivate them when enemies are dead. (Or just open the doors after 3 seconds because we do not have any combat implemented.)</p><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>Show code block</summary><div><div class="collapsibleContent_i85q"><div><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">[CreateAssetMenu(menuName = &quot;Edgar/Examples/Gungeon/Post-processing&quot;, fileName = &quot;GungeonPostProcessing&quot;)]</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">public class GungeonPostProcessingTask : DungeonGeneratorPostProcessingGrid2D</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public GameObject[] Enemies;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public override void Run(DungeonGeneratorLevelGrid2D level)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        foreach (var roomInstance in level.RoomInstances)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            var room = (GungeonRoom) roomInstance.Room;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            var roomTemplateInstance = roomInstance.RoomTemplateInstance;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            // Find floor tilemap layer</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            var tilemaps = RoomTemplateUtilsGrid2D.GetTilemaps(roomTemplateInstance);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            var floor = tilemaps.Single(x =&gt; x.name == &quot;Floor&quot;).gameObject;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            // Add current room detection handler</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            floor.AddComponent&lt;GungeonCurrentRoomHandler&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            // Add room manager</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            var roomManager = roomTemplateInstance.AddComponent&lt;GungeonRoomManager&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            if (room.Type != GungeonRoomType.Corridor)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                // Set enemies and floor collider to the room manager</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                roomManager.Enemies = Enemies;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                roomManager.FloorCollider = floor.GetComponent&lt;CompositeCollider2D&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                // Find all the doors of neighboring corridors and save them in the room manager</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                // The term &quot;door&quot; has two different meanings here:</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                //   1. it represents the connection point between two rooms in the level</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                //   2. it represents the door game object that we have inside each corridor</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                foreach (var door in roomInstance.Doors)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    // Get the room instance of the room that is connected via this door</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    var corridorRoom = door.ConnectedRoomInstance;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    // Get the room template instance of the corridor room</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    var corridorGameObject = corridorRoom.RoomTemplateInstance;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    // Find the door game object by its name</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    var doorsGameObject = corridorGameObject.transform.Find(&quot;Door&quot;)?.gameObject;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    // Each corridor room instance has a connection that represents the edge in the level graph</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    // We use the connection object to check if the corridor should be locked or not</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    var connection = (GungeonConnection) corridorRoom.Connection;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    if (doorsGameObject != null)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                        // If the connection is locked, we set the Locked state and keep the game object active</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                        // Otherwise we set the EnemyLocked state and deactivate the door. That means that the door is active and locked</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                        // only when there are enemies in the room.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                        if (connection.IsLocked)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                            doorsGameObject.GetComponent&lt;GungeonDoor&gt;().State = GungeonDoor.DoorState.Locked;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                        else</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                            doorsGameObject.GetComponent&lt;GungeonDoor&gt;().State = GungeonDoor.DoorState.EnemyLocked;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                            doorsGameObject.SetActive(false);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                        roomManager.Doors.Add(doorsGameObject);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    /* ... */</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div></div></details><h3 class="anchor anchorWithStickyNavbar_mojV" id="locked-doors">Locked doors<a class="hash-link" href="#locked-doors" title="Direct link to heading">â€‹</a></h3><p>The last thing that we have to handle are doors that should be locked even if there are no enemies. These doors are used to separate reward/shop rooms from other rooms and force the player to find a different path to the reward room. When the player discovers the reward room, all the neighbouring locked doors are unlocked.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="fog-of-war">Fog of War<a class="hash-link" href="#fog-of-war" title="Direct link to heading">â€‹</a></h2><p>In this example, the <a href="/Edgar-Unity/docs/2.0.2/guides/fog-of-war/">Fog of War</a> feature is enabled. For more information on how to set up the feature, please see the <a href="/Edgar-Unity/docs/2.0.2/guides/fog-of-war/">documentation</a>. In order to integrate the Fog of War into this example scene, I modified the current room detection script (<code>GungeonCurrentRoomHandler</code> class) to trigger the fog when a player enters a corridor room, and I also modified the <code>GungeonPostProcessTask</code> class to set up the fog after a level is generated.</p><blockquote><p><strong>Note:</strong> The integration of the Fog of War effect into this example could be improved. I think that it looks better when the next room is revealed only after the player walks through the middle of a corridor and not right when he enters the corridor. Also, the integration with doors is not ideal - you can reveal rooms behind locked rooms if you go close to the door. I want to improve this in the future.</p></blockquote><blockquote><p><strong>Note:</strong> To disable the Fog of War effect, go to the main camera and disable the Fog of War component.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="results">Results<a class="hash-link" href="#results" title="Direct link to heading">â€‹</a></h2><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/result3-38491c57d77be9d630866eeff0baf539.png" target="_blank"><img src="/Edgar-Unity/assets/images/result3-38491c57d77be9d630866eeff0baf539.png" alt="image" width="953" height="496" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Example result</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/result4-1ca21d2df080c7919aad0702747045a6.png" target="_blank"><img src="/Edgar-Unity/assets/images/result4-1ca21d2df080c7919aad0702747045a6.png" alt="image" width="952" height="497" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Example result</div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/OndrejNepozitek/Edgar-Unity/tree/docusaurus/versioned_docs/version-2.0.2/examples/enter-the-gungeon.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Edgar-Unity/docs/2.0.2/examples/isometric-1/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">(PRO) Isometric 1</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Edgar-Unity/docs/2.0.2/examples/dead-cells/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">(PRO) Dead Cells</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#room-templates" class="table-of-contents__link toc-highlight">Room templates</a></li><li><a href="#level-graphs" class="table-of-contents__link toc-highlight">Level graphs</a><ul><li><a href="#custom-rooms-and-connections" class="table-of-contents__link toc-highlight">Custom rooms and connections</a></li><li><a href="#input-setup-task" class="table-of-contents__link toc-highlight">Input setup task</a></li><li><a href="#pick-random-level-graph" class="table-of-contents__link toc-highlight">Pick random level graph</a></li><li><a href="#random-secret-rooms" class="table-of-contents__link toc-highlight">Random secret rooms</a></li></ul></li><li><a href="#room-manager" class="table-of-contents__link toc-highlight">Room manager</a><ul><li><a href="#current-room-detection" class="table-of-contents__link toc-highlight">Current room detection</a></li><li><a href="#enemies" class="table-of-contents__link toc-highlight">Enemies</a></li><li><a href="#doors" class="table-of-contents__link toc-highlight">Doors</a></li><li><a href="#locked-doors" class="table-of-contents__link toc-highlight">Locked doors</a></li></ul></li><li><a href="#fog-of-war" class="table-of-contents__link toc-highlight">Fog of War</a></li><li><a href="#results" class="table-of-contents__link toc-highlight">Results</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Edgar-Unity/docs/introduction/">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/OndrejNepozitek" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/syktZ6VWq9" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://ondra.nepozitek.cz/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/OndrejNepozitek/Edgar-Unity" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 OndÅ™ej NepoÅ¾itek</div></div></div></footer></div>
<script src="/Edgar-Unity/assets/js/runtime~main.82c1af0d.js"></script>
<script src="/Edgar-Unity/assets/js/main.be3a200f.js"></script>
</body>
</html>