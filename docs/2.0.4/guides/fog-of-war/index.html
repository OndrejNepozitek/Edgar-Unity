<!doctype html>
<html class="docs-version-2.0.4" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-31904365-17","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Edgar - Unity" href="/Edgar-Unity/opensearch.xml"><title data-react-helmet="true">(PRO) Fog of war | Edgar - Unity</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ondrejnepozitek.github.io/Edgar-Unity/docs/2.0.4/guides/fog-of-war/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="2.0.4"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-2.0.4"><meta data-react-helmet="true" property="og:title" content="(PRO) Fog of war | Edgar - Unity"><meta data-react-helmet="true" name="description" content="In this guide, we will learn how to enable a simple fog of war functionality."><meta data-react-helmet="true" property="og:description" content="In this guide, we will learn how to enable a simple fog of war functionality."><link data-react-helmet="true" rel="icon" href="/Edgar-Unity/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/2.0.4/guides/fog-of-war/"><link data-react-helmet="true" rel="alternate" href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/2.0.4/guides/fog-of-war/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/2.0.4/guides/fog-of-war/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/Edgar-Unity/assets/css/styles.cf388800.css">
<link rel="preload" href="/Edgar-Unity/assets/js/runtime~main.82c1af0d.js" as="script">
<link rel="preload" href="/Edgar-Unity/assets/js/main.be3a200f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">Check out the PRO version of the generator on the <a href="https://url.ondrejnepozitek.com/edgar-docs" target="_blank">Unity Asset Store</a>!</div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Edgar-Unity/"><b class="navbar__title">Edgar - Unity</b></a><a class="navbar__item navbar__link" href="/Edgar-Unity/versions/">v2.0.6</a><a href="https://url.ondrejnepozitek.com/edgar-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Buy Edgar PRO<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/Edgar-Unity/docs/introduction/">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Edgar-Unity/docs/introduction/">2.0.6</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/2.0.5/introduction/">2.0.5</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/2.0.4/introduction/">2.0.4</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/next/introduction/">Master/Unreleased</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/Edgar-Unity/docs/3d/introduction/">Docs (3D version beta)</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Edgar-Unity/docs/3d/introduction/">2.0.6</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/3d/2.0.5/introduction/">2.0.5</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/3d/2.0.4/introduction/">2.0.4</a></li><li><a class="dropdown__link" href="/Edgar-Unity/docs/next/3d/introduction/">Master/Unreleased</a></li></ul></div><a href="https://github.com/OndrejNepozitek/Edgar-Unity/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><span class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></span><span class="DocSearch-Button-Key">K</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO menuWithAnnouncementBar_x19h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/introduction/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/motivation/">Motivation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/installation/">Installation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Basics</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/basics/quickstart/">Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/basics/room-templates/">Room templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/basics/level-graphs/">Level graphs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/basics/generator-setup/">Generator setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/basics/generated-level-info/">Level structure and rooms data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/basics/performance-tips/">Performance tips</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Generators</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/generators/dungeon-generator/">Dungeon generator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/generators/post-process/">Post-processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/generators/platformer-generator/">(PRO) Platformer generator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/generators/custom-input/">(PRO) Custom input</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Examples</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/examples/example-1/">Example 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/examples/example-2/">Example 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/examples/platformer-1/">(PRO) Platformer 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/examples/isometric-1/">(PRO) Isometric 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/examples/enter-the-gungeon/">(PRO) Enter the Gungeon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/examples/dead-cells/">(PRO) Dead Cells</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active menuLinkText_QVir" aria-current="page">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/guides/room-template-customization/">Room template customization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/guides/current-room-detection/">Current room detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Edgar-Unity/docs/2.0.4/guides/fog-of-war/">(PRO) Fog of war</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/guides/minimap/">(PRO) Minimap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/guides/door-sockets/">(PRO) Door sockets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/guides/directed-level-graphs/">(PRO) Directed level graphs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/guides/custom-editor-controls/">(PRO) Custom editor controls</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Other</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/other/faq/">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item hidden-category"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Recipes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/2.0.4/recipes/prefabs-in-editor/">Keep prefabs in editor</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Edgar - Unity<!-- --> <b>2.0.4</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/Edgar-Unity/docs/guides/fog-of-war/">latest version</a></b> (<!-- -->2.0.6<!-- -->).</div></div><div class="docItemContainer_vinB"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->2.0.4</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>(PRO) Fog of war</h1></header><p>In this guide, we will learn how to enable a simple fog of war functionality.</p><div style="text-align:center"><div class="image-inner"><img src="/Edgar-Unity/assets/images/example-8439e6aa8268bc2cfa3341f912713cb8.gif" width="800" height="449"></div><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Fog of War example (exported to a GIF with low FPS, everything is smooth ingame)</div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="limitations">Limitations<a class="hash-link" href="#limitations" title="Direct link to heading">â€‹</a></h2><ul><li><strong>Performance on large levels</strong> - Not suitable for very large levels (e.g. area larger than 500x500 tiles) - see <a href="/Edgar-Unity/docs/2.0.4/guides/fog-of-war/#implementation-and-performance">Implementation and performance</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h2><ul><li><strong>Built-in Render Pipeline</strong> - works in Unity 2018.4+</li><li><strong>Lightweight Render Pipeline (LWRP)</strong> - version &gt;= 6.5 of LWRP is needed (and therefore Unity 2019.2+)</li><li><strong>Universal Render Pipeline (URP)</strong> - version &gt;= 7.0 of URP is needed (and therefore Unity 2019.3+)<ul><li><strong>IMPORTANT!</strong> - this feature <strong>does not</strong> work with the <strong>2D Renderer (Experimental)</strong> as it is still experimental and people in Unity have not yet implemented custom renderer features!</li></ul></li><li><strong>High Definition Render Pipeline (HDRP)</strong> - currently not supported</li></ul><blockquote><p><strong>Note:</strong> Additional setup steps are needed for LWRP and URP, see below.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="example-scene">Example scene<a class="hash-link" href="#example-scene" title="Direct link to heading">â€‹</a></h2><p>An example scene can be found at <i class="path">Examples/Grid2D/FogOfWarExample</i>. </p><blockquote><p><strong>Note:</strong> Please see the <a href="/Edgar-Unity/docs/2.0.4/guides/fog-of-war/#add-custom-renderer-feature">Add custom renderer feature</a> setup step below to make the example scene work in URP/LWRP.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="setup">Setup<a class="hash-link" href="#setup" title="Direct link to heading">â€‹</a></h2><p>There are several steps that need to be done to enable the <em>Fog of War</em> feature. I tried to make the setup as simple as possible, but it still requires some manual work.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="add-fog-of-war-component">Add Fog of War component<a class="hash-link" href="#add-fog-of-war-component" title="Direct link to heading">â€‹</a></h3><p>The first step is to add the <strong>Fog of War</strong> component to the game object that holds the main camera of your game. The component has several settings, see the <a href="/Edgar-Unity/docs/2.0.4/guides/fog-of-war/#configuration-and-examples">Configuration</a> section.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="include-shader-in-build">Include shader in build<a class="hash-link" href="#include-shader-in-build" title="Direct link to heading">â€‹</a></h3><p>This feature uses a custom shader that you have to manually include in the build of you game. Navigate to <i class="path">Edit â†’ Project Settings â†’ Graphics</i> and add the <em>Edgar/FogOfWar</em> shader to the <em>Always Included Shaders</em> list. If you do not do that, the game will work in the editor, but it won&#x27;t work in a standalone build.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="add-custom-renderer-feature">Add custom renderer feature<a class="hash-link" href="#add-custom-renderer-feature" title="Direct link to heading">â€‹</a></h3><p><strong>(URP and LWRP only)</strong> - This step is only required if you use URP or LWRP as they do not support the <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.OnRenderImage.html" target="_blank" rel="noopener noreferrer">OnRenderImage()</a> hook. To work around that, you have to manually add a custom renderer feature.</p><p><strong>LWRP</strong>: The first step is to create a custom <strong>Forward Renderer</strong> asset if you do not have one already. This can be done in <i class="path">Create â†’ Rendering â†’ LWRP â†’ Forward Renderer</i>. You have to make sure that this renderer is used in the render pipeline instead of the default one.</p><p><strong>URP</strong>: With URP, there should already exist a <strong>Forward Renderer</strong> asset that was created with the render pipeline asset. Locate the renderer.</p><p>The next step is to open the <strong>Forward Renderer</strong> asset. Click the <em>Add Renderer Feature</em> and choose the <em>Fog Of War Feature</em>. Based on the render pipeline that you are using, the feature should be called <em>Fog Of War LWRP Feature</em> or <em>Fog Of War URP Feature</em>.</p><blockquote><p><strong>Note:</strong> If you do not see the <em>Fog Of War Feature</em>, make sure you meet the requirements as described <a href="/Edgar-Unity/docs/2.0.4/guides/fog-of-war/#prerequisites">above</a>. The feature is conditionally compiled only if there are all the required packages installed.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_mojV" id="add-custom-post-processing-logic">Add custom post-processing logic<a class="hash-link" href="#add-custom-post-processing-logic" title="Direct link to heading">â€‹</a></h3><p>After a level is generated, we have to set up the Fog of War component. The best place to do that is in a <a href="/Edgar-Unity/docs/2.0.4/generators/post-process/#custom-post-processing">custom post-processing task</a>. Sample code with comments can be seen below:</p><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">[CreateAssetMenu(menuName = &quot;Edgar/Examples/Fog of War/Post-processing&quot;, fileName = &quot;FogOfWarPostProcessing&quot;)]</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">public class FogOfWarExamplePostProcessing : DungeonGeneratorPostProcessingGrid2D</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    public override void Run(DungeonGeneratorLevelGrid2D level)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // To setup the FogOfWar component, we need to get the root game object that holds the level.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var generatedLevelRoot = level.RootGameObject;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // If we use the Wave mode, we must specify the point from which the wave spreads as we reveal a room.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // The easiest way to do so is to get the player game object and use its transform as the wave origin.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Change this line if your player game object does not have the &quot;Player&quot; tag.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var player = GameObject.FindGameObjectWithTag(&quot;Player&quot;);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Now we can setup the FogOfWar component.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // To make it easier to work with the component, the class is a singleton and provides the Instance property.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        FogOfWarGrid2D.Instance.Setup(generatedLevelRoot, player.transform);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // After the level is generated, we usually want to reveal the spawn room.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // To do that, we have to find the room instance that corresponds to the Spawn room.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // In this example, the spawn room is called &quot;Spawn&quot; so we find it by its name.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var spawnRoom = level</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            .RoomInstances</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            .SingleOrDefault(x =&gt; x.Room.GetDisplayName() == &quot;Spawn&quot;);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        if (spawnRoom == null)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            throw new InvalidOperationException(&quot;There must be exactly one room with the name &#x27;Spawn&#x27; for this example to work.&quot;);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // When we have the spawn room instance, we can reveal the room from the fog.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // We use revealImmediately: true so that the first room is revealed instantly,</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // but it is optional.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        FogOfWarGrid2D.Instance.RevealRoom(spawnRoom, revealImmediately: true);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><blockquote><p><strong>Note:</strong> More information about the API of the <em>FogOfWar</em> component can be found in the <a href="/Edgar-Unity/docs/2.0.4/guides/fog-of-war/#api">API</a> section.</p></blockquote><p>After enabling this post-processing task and starting the game, we should see that all but the spawn room are hidden in the fog. The last thing that we have to handle is to reveal rooms when we enter them.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="add-trigger-colliders">Add trigger colliders<a class="hash-link" href="#add-trigger-colliders" title="Direct link to heading">â€‹</a></h3><p>The last step is to add trigger colliders that will reveal a room when the player enters that room. There are at least two possible ways of doing that:</p><ol><li>Add colliders to all room templates and always reveal only the room for which the collider was triggered</li><li>Add colliders only to corridor room templates and when you trigger the collider reveal both the collider and its neighbours</li></ol><p>In this tutorial, I decided to use the second option as it, in my opinion, looks better. This is the final result that we want to achieve:</p><div style="text-align:center"><div class="image-inner"><img src="/Edgar-Unity/assets/images/colliders_goal-2e6931b2e2afcc5b16438627e7589a38.gif" width="650" height="345"></div><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Rooms are revealed after a corridor is visited</div></div><p>To achieve this, we have to slightly modify our corridor room templates. In each corridor room template, we create a child game object with a collider that has <em>Is Trigger</em> set to true. The collider should mark the area where the player has to stand to trigger the fog of war script. The easiest thing to do is to add a collider that covers the whole floor of the corridor. However, it is also possible to make the collider slightly smaller and trigger the script only when the player is closer to the centre of the corridor. Our example setup can be seen below:</p><div style="text-align:center"><div class="image-inner"><img src="/Edgar-Unity/assets/images/colliders_setup-01777bafa9ceb0cbe9a1d415168182dd.png" width="1676" height="853"></div><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Setup of the corridor Fog of War trigger</div></div><p>The last step is to add a simple component (to the game object with the collider) that will call the Fog of War script when the collider is triggered:</p><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#cccccc;background-color:#242424"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#cccccc"><span class="token plain">public class FogOfWarExampleTriggerHandler : MonoBehaviour</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">{</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    private RoomInstanceGrid2D roomInstance;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    private void Start()</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        roomInstance = GetRoomInstance();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    private RoomInstanceGrid2D GetRoomInstance()</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // The goal of this method is to get the RoomInstance of the corresponding room template</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // so that we can pass it to the FogOfWar script.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Get the root game object of the room template</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var roomTemplate = transform.parent.gameObject;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Each room template has a RoomInfo component attached</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        var roomInfo = roomTemplate.GetComponent&lt;RoomInfoGrid2D&gt;();</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // The RoomInfo component has a RoomInstance property containing information about the room</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        return roomInfo.RoomInstance;</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    private void OnTriggerEnter2D(Collider2D otherCollider)</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // Make sure that the player game object has the &quot;Player&quot; tag</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        // or remove/modify this line.</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        if (otherCollider.gameObject.CompareTag(&quot;Player&quot;))</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">            FogOfWarGrid2D.Instance.RevealRoomAndNeighbors(roomInstance);</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#cccccc"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>After you modify all your corridor room templates, the Fog of War should work as expected.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="api">API<a class="hash-link" href="#api" title="Direct link to heading">â€‹</a></h2><p>Up-to-date API documentation can be found <!-- -->[here][FogOfWar]<!-- -->.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="configuration-and-examples">Configuration and examples<a class="hash-link" href="#configuration-and-examples" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="fog-colour">Fog colour<a class="hash-link" href="#fog-colour" title="Direct link to heading">â€‹</a></h3><p>The <em>FogColor</em> property specifies the colour of tiles that are hidden in the fog. It defaults to black but in our example scene we use purple as that is the colour which works best with the tileset.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/fog_color_purple-a2c4a3b2967dfedfb3b1b7d4ff99ac03.png" target="_blank"><img src="/Edgar-Unity/assets/images/fog_color_purple-a2c4a3b2967dfedfb3b1b7d4ff99ac03.png" alt="image" width="940" height="703" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">FogColor set to purple</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/fog_color_black-c2088997d0fd09265135ade82445a95f.png" target="_blank"><img src="/Edgar-Unity/assets/images/fog_color_black-c2088997d0fd09265135ade82445a95f.png" alt="image" width="941" height="704" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">FogColor set to black</div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="transition-mode">Transition mode<a class="hash-link" href="#transition-mode" title="Direct link to heading">â€‹</a></h3><p>The <em>Transition mode</em> property specifies what to do when there are two neighbouring tiles with different fog values (i.e. one tile is less revealed than the other tile). If we use the <em>Smooth</em> mode, the colours of pixels on the two tiles will smoothly interpolate from one fog value to the other. On the other hand, if we use the <em>Tile Based</em> mode, no interpolation will be used and there will be a strict division between the fog values of the two tiles. There is also a third mode now - the <em>Custom</em> mode that is somewhere between the two previous modes and adds two additional parameters - <em>Tile granularity</em> and <em>Fog smoothness</em>.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/transition_mode_smooth-877f2656f223361a8a42f182c41ddb28.gif" target="_blank"><img src="/Edgar-Unity/assets/images/transition_mode_smooth-877f2656f223361a8a42f182c41ddb28.gif" alt="image" width="500" height="373" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">TransitionMode set to Smooth (gif)</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/transition_mode_tile_based-705a3ef877af01ac68240fb3b6cf0602.gif" target="_blank"><img src="/Edgar-Unity/assets/images/transition_mode_tile_based-705a3ef877af01ac68240fb3b6cf0602.gif" alt="image" width="500" height="373" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">TransitionMode set to Tile Based (gif)</div></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="fog-value">Fog value<a class="hash-link" href="#fog-value" title="Direct link to heading">â€‹</a></h4><p>Before we dive into the next two parameters, it is good to know what is the <em>fog (transparency) value</em> of a pixel. When we want to show that a pixel is affected by the fog of war effect, we interpolate between the colour of that pixel and the fog colour. The value that controls the interpolation is called the <em>fog value</em>. This <em>fog value</em> is always in the <em>[0,1]</em> range. To completely hide a pixel in the fog, we set its <em>fog value</em> to 0. To completely show a pixel, we set its <em>fog value</em> to 1. If we want to animate the transition between pixels being hidden and then revealed, we can gradually increase the <em>fog value</em>, starting with the initial <em>fog value</em> and going all the way up to 1.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="tilegranularity"><code>TileGranularity</code><a class="hash-link" href="#tilegranularity" title="Direct link to heading">â€‹</a></h4><p>This parameter controls into how many pixel chunks is each tile divided. The actual relation between the value of this parameter and the number of chunks is that if the value is equal to <em>X</em>, each tile is divided into <em>X<!-- -->*<!-- -->X</em> same-sized chunks. That means that if we set the value to 2, we will get <em>2x2=4</em> chunks in total - each tile is divided into quarters.</p><p>The main property of individual chunks is that each pixel in a chunk has the same <em>fog value</em> as all the other pixels in the chunk. Both the <em>Tile-based</em> and <em>Smooth</em> transition modes are special cases of this division to chunks. The <em>Tile-based</em> mode equals to setting <em>TileGranularity</em> to 1 - each tile is a single chunk. The <em>Smooth</em> mode equals to setting <em>TileGranularity</em> to infinity - each pixel is independent of other pixels. </p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/granularity_1-54f2fa67a860544e358a48b00ff4f620.gif" target="_blank"><img src="/Edgar-Unity/assets/images/granularity_1-54f2fa67a860544e358a48b00ff4f620.gif" alt="image" width="500" height="374" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">TileGranularity set to 1 (gif)</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/granularity_2-bf47a4e362ead35b676b6557c4aeb181.gif" target="_blank"><img src="/Edgar-Unity/assets/images/granularity_2-bf47a4e362ead35b676b6557c4aeb181.gif" alt="image" width="500" height="374" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">TileGranularity set to 2 (gif)</div></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="fogsmoothness"><code>FogSmoothness</code><a class="hash-link" href="#fogsmoothness" title="Direct link to heading">â€‹</a></h4><p>This parameter controls how many possible <em>fog values</em> there are for every pixel. In other words, the parameter controls how many possible steps there are between the <em>fog values</em> 0 and 1. The exact formula is <em>stepSize = 1 / fogSmoothness</em>. For example, by setting the <em>FogSmoothness</em> to <em>2</em>, the step size is equal to <em>1/4 = 0.25</em> and there are 5 possible fog values - <em>0</em>, <em>0.25</em>, <em>0.5</em>, <em>0.75</em> and <em>1</em>.</p><p>If you want to emphasize the transitions between individual <em>fog values</em> set the parameter to a lower value, for example <em>10</em>. If you want to have a very smooth transition between individual <em>fog values</em>, use a high value, for example <em>100</em>.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/smoothness_2-485dcc02d248b10978c137672ab38ea6.gif" target="_blank"><img src="/Edgar-Unity/assets/images/smoothness_2-485dcc02d248b10978c137672ab38ea6.gif" alt="image" width="500" height="374" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">FogSmoothness set to 2 (gif)</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/smoothness_10-a7fde071806e38285640c93a522d4ada.gif" target="_blank"><img src="/Edgar-Unity/assets/images/smoothness_10-a7fde071806e38285640c93a522d4ada.gif" alt="image" width="500" height="374" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">FogSmoothness set to 10 (gif)</div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="wave-mode">Wave mode<a class="hash-link" href="#wave-mode" title="Direct link to heading">â€‹</a></h3><p>The first available mode is the <strong>Wave mode</strong>. With the <em>Wave mode</em>, the fog reveals based on the distance of individual tiles from the player. The tiles that are close to the player are revealed sooner than tiles that are far from the player. There are two properties that alter the behaviour when in the <em>Wave mode</em>: </p><h4 class="anchor anchorWithStickyNavbar_mojV" id="wavespeed"><code>WaveSpeed</code><a class="hash-link" href="#wavespeed" title="Direct link to heading">â€‹</a></h4><p>The <strong>WaveSpeed</strong> property specifies how fast the wave moves and its unit is <em>tiles per second</em>. If we have a tile that is 15 tiles away from the player and the wave speed is set to 5, then the tile will be fully revealed 15/5 = 3 seconds after triggering the fog of war script.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/wave_speed_10-b3350657bd662e529fbbf847e9f30d5a.gif" target="_blank"><img src="/Edgar-Unity/assets/images/wave_speed_10-b3350657bd662e529fbbf847e9f30d5a.gif" alt="image" width="500" height="373" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">WaveSpeed set to 10 tiles per second (gif)</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/wave_speed_1-2ee40867ed5791e4ae2e4c7064d5b8f8.gif" target="_blank"><img src="/Edgar-Unity/assets/images/wave_speed_1-2ee40867ed5791e4ae2e4c7064d5b8f8.gif" alt="image" width="500" height="373" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">WaveSpeed set to 1 tile per second (gif)</div></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="waverevealthreshold"><code>WaveRevealThreshold</code><a class="hash-link" href="#waverevealthreshold" title="Direct link to heading">â€‹</a></h4><p>The <strong>WaveRevealThreshold</strong> property specifies for how long is a tile completely hidden before it starts to be revealed. If we set the value to 0, all tiles to be revealed will immediately have non-zero opacity. The tiles that are close to the player will quickly have their full opacity while it will take longer for tiles that are far away. If we set the value to 0.5 and have a tile that should be fully revealed after 3 seconds, it will make the tile completely hidden for 0.5 * 3 = 1.5 seconds and only after that the opacity will be increased, and the tile will be fully revealed after additional 1.5 seconds. As a result, it will look like the wave actually moves.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/wave_reveal_threshold_0-a4d77051bfd64567d5cfffc64188d536.gif" target="_blank"><img src="/Edgar-Unity/assets/images/wave_reveal_threshold_0-a4d77051bfd64567d5cfffc64188d536.gif" alt="image" width="500" height="373" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">WaveRevealThreshold set to 0 (gif)</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/wave_reveal_threshold_0_5-7b51c6f4f5e44c902b0c7e250de015be.gif" target="_blank"><img src="/Edgar-Unity/assets/images/wave_reveal_threshold_0_5-7b51c6f4f5e44c902b0c7e250de015be.gif" alt="image" width="500" height="373" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">WaveRevealThreshold set to 0.5 (gif)</div></div></div><blockquote><p><strong>Note:</strong> It is not recommended to use values higher than 0.5 in the combination with the Smooth transition mode.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_mojV" id="fade-in-mode">Fade In mode<a class="hash-link" href="#fade-in-mode" title="Direct link to heading">â€‹</a></h3><p>The second available mode is the <strong>Fade In mode</strong>. With the <em>Fade In mode</em>, all the tiles are revealed at the same time no matter the distance from the player. There is a single property that alters the behaviour of this mode:</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="fadeinduration"><code>FadeInDuration</code><a class="hash-link" href="#fadeinduration" title="Direct link to heading">â€‹</a></h4><p>The <strong>FadeInDuration</strong> property specifies after how many seconds should the tiles be completely revealed. Value <em>0</em> means that all the tiles will be revealed immediately after triggering the fog of war script.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/fade_in_duration_0-04d4851f1ba6d337ab4f085426aa45da.gif" target="_blank"><img src="/Edgar-Unity/assets/images/fade_in_duration_0-04d4851f1ba6d337ab4f085426aa45da.gif" alt="image" width="500" height="373" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">FadeInDuration set to 0 seconds (gif)</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/fade_in_duration_5-5ecc76dcf09adbd7b6a9576a4c2830f6.gif" target="_blank"><img src="/Edgar-Unity/assets/images/fade_in_duration_5-5ecc76dcf09adbd7b6a9576a4c2830f6.gif" alt="image" width="500" height="373" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">FadeInDuration set to 5 seconds (gif)</div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="reveal-corridors">Reveal Corridors<a class="hash-link" href="#reveal-corridors" title="Direct link to heading">â€‹</a></h3><p>The <strong>RevealCorridors</strong> checkbox specifies whether you want to reveal some tiles from neighbouring corridor rooms even though the rooms themselves are not yet fully revealed. The main purpose of this feature is aesthetics - in my opinion, the game looks better when the corridor tiles gradually fade away. There are two properties that alter the behaviour of this feature:</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/reveal_corridors_enabled-5f58406a5097143edf11dc6c4b8de72b.png" target="_blank"><img src="/Edgar-Unity/assets/images/reveal_corridors_enabled-5f58406a5097143edf11dc6c4b8de72b.png" alt="image" width="761" height="567" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">RevealCorridors enabled</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/reveal_corridors_disabled-670997ce3fe939172290822efa75371b.png" target="_blank"><img src="/Edgar-Unity/assets/images/reveal_corridors_disabled-670997ce3fe939172290822efa75371b.png" alt="image" width="761" height="567" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">RevealCorridors disabled</div></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="revealcorridorstiles"><code>RevealCorridorsTiles</code><a class="hash-link" href="#revealcorridorstiles" title="Direct link to heading">â€‹</a></h4><p>The <strong>RevealCorridorsTiles</strong> property specifies how many tiles of each corridor should be revealed. To be more precise, it specifies the maximum distance of tiles (counted from the doors of the corridor) that should be revealed.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/reveal_corridors_tiles_1-242cfd124d6c8b79d080dbc1633176f0.png" target="_blank"><img src="/Edgar-Unity/assets/images/reveal_corridors_tiles_1-242cfd124d6c8b79d080dbc1633176f0.png" alt="image" width="761" height="566" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">RevealCorridorsTiles set to 1</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/reveal_corridors_tiles_3-fdd0cbb110cee3a1e32b26f0da7b9585.png" target="_blank"><img src="/Edgar-Unity/assets/images/reveal_corridors_tiles_3-fdd0cbb110cee3a1e32b26f0da7b9585.png" alt="image" width="761" height="566" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">RevealCorridorsTiles set to 3</div></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="revealcorridorsgradually"><code>RevealCorridorsGradually</code><a class="hash-link" href="#revealcorridorsgradually" title="Direct link to heading">â€‹</a></h4><p>The <strong>RevealCorridorsGradually</strong> property specifies whether corridor tiles should gradually fade out until they are barely visible.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/reveal_corridors_gradually_enabled-0416faaaab83879936a37ab07f68e829.png" target="_blank"><img src="/Edgar-Unity/assets/images/reveal_corridors_gradually_enabled-0416faaaab83879936a37ab07f68e829.png" alt="image" width="760" height="567" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">RevealCorridorsGradually enabled</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/reveal_corridors_gradually_disabled-c8c6426d9e2e70acf012a98294753809.png" target="_blank"><img src="/Edgar-Unity/assets/images/reveal_corridors_gradually_disabled-c8c6426d9e2e70acf012a98294753809.png" alt="image" width="760" height="565" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">RevealCorridorsGradually disabled</div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="initial-fog-transparency">Initial fog transparency<a class="hash-link" href="#initial-fog-transparency" title="Direct link to heading">â€‹</a></h3><p>The <strong>InitialFogTransparency</strong> property controls the initial transparency of the fog. The valid range for this parameter is <em>[0,1]</em>. By default, this value is set to <em>0</em>, which means that tiles that are covered in fog are completely hidden. </p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/transparency_0-d22fcedebd94461a01c9056636d7aab2.png" target="_blank"><img src="/Edgar-Unity/assets/images/transparency_0-d22fcedebd94461a01c9056636d7aab2.png" alt="image" width="644" height="485" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">InitialFogTransparency set to 0</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top;text-align:center"><a href="/Edgar-Unity/assets/images/transparency_0_15-df173635a9e4daae4ae1286c342e7eae.png" target="_blank"><img src="/Edgar-Unity/assets/images/transparency_0_15-df173635a9e4daae4ae1286c342e7eae.png" alt="image" width="642" height="485" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">InitialFogTransparency set to 0.15</div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="implementation-and-performance">Implementation and performance<a class="hash-link" href="#implementation-and-performance" title="Direct link to heading">â€‹</a></h2><p>The Fog of War is implemented as an Image Effect (built-in render pipeline) or a Render Feature (URP). The script keeps track of which tiles should be revealed and passes this information to a shader via a texture where each pixel represents a single tile in the level. Based on the colour of individual pixels, the shader lerps between the actual tile graphics and the fog colour. All transitions are done on a CPU - when the fog changes, an updated texture is sent to the GPU.</p><p>The main performance bottleneck is when some revealed tiles do not fit in the fog texture. The script starts with a 1x1 texture and when the first room is revealed, it creates a new texture that is large enough to fit all the revealed tiles (plus a bit extra to make sure that we do not have to do this too often). This process repeats every time the texture is too small. The problem is that as the texture gets larger, more CPU time is needed to create the texture and upload it to the GPU. I did a simple benchmark, and it looks like the performance is good enough for levels with up to 250k tiles (i.e. the bounding box of the level is approx. 500x500 tiles). For larger levels, the game freezes for a while when the texture is recreated. However, the average level generated by the plugin should be much smaller than that, so the performance of the game should not be affected by the Fog of War script.</p><blockquote><p><strong>Note:</strong> If you have problems with the performance of the Fog of War script, please create a Github issue.</p></blockquote><p>If you want to have the minimum possible performance footprint, do not use any animated transitions. Use the <em>Fade In</em> mode and set the <em>Fade In Duration</em> to <em>0 seconds</em>. With this configuration, the script will compute something only in the frame when a room is revealed.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="advanced">Advanced<a class="hash-link" href="#advanced" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="serialization">Serialization<a class="hash-link" href="#serialization" title="Direct link to heading">â€‹</a></h3><p>TBD.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/OndrejNepozitek/Edgar-Unity/tree/docusaurus/versioned_docs/version-2.0.4/guides/fog-of-war.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Edgar-Unity/docs/2.0.4/guides/current-room-detection/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Current room detection</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Edgar-Unity/docs/2.0.4/guides/minimap/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">(PRO) Minimap</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#limitations" class="table-of-contents__link toc-highlight">Limitations</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#example-scene" class="table-of-contents__link toc-highlight">Example scene</a></li><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a><ul><li><a href="#add-fog-of-war-component" class="table-of-contents__link toc-highlight">Add Fog of War component</a></li><li><a href="#include-shader-in-build" class="table-of-contents__link toc-highlight">Include shader in build</a></li><li><a href="#add-custom-renderer-feature" class="table-of-contents__link toc-highlight">Add custom renderer feature</a></li><li><a href="#add-custom-post-processing-logic" class="table-of-contents__link toc-highlight">Add custom post-processing logic</a></li><li><a href="#add-trigger-colliders" class="table-of-contents__link toc-highlight">Add trigger colliders</a></li></ul></li><li><a href="#api" class="table-of-contents__link toc-highlight">API</a></li><li><a href="#configuration-and-examples" class="table-of-contents__link toc-highlight">Configuration and examples</a><ul><li><a href="#fog-colour" class="table-of-contents__link toc-highlight">Fog colour</a></li><li><a href="#transition-mode" class="table-of-contents__link toc-highlight">Transition mode</a></li><li><a href="#wave-mode" class="table-of-contents__link toc-highlight">Wave mode</a></li><li><a href="#fade-in-mode" class="table-of-contents__link toc-highlight">Fade In mode</a></li><li><a href="#reveal-corridors" class="table-of-contents__link toc-highlight">Reveal Corridors</a></li><li><a href="#initial-fog-transparency" class="table-of-contents__link toc-highlight">Initial fog transparency</a></li></ul></li><li><a href="#implementation-and-performance" class="table-of-contents__link toc-highlight">Implementation and performance</a></li><li><a href="#advanced" class="table-of-contents__link toc-highlight">Advanced</a><ul><li><a href="#serialization" class="table-of-contents__link toc-highlight">Serialization</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Edgar-Unity/docs/introduction/">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/OndrejNepozitek" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/syktZ6VWq9" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://ondra.nepozitek.cz/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/OndrejNepozitek/Edgar-Unity" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 OndÅ™ej NepoÅ¾itek</div></div></div></footer></div>
<script src="/Edgar-Unity/assets/js/runtime~main.82c1af0d.js"></script>
<script src="/Edgar-Unity/assets/js/main.be3a200f.js"></script>
</body>
</html>